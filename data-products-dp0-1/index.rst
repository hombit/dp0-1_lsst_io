.. Review the README on instructions to contribute.
.. Static objects, such as figures, should be stored in the _static directory. Review the _static/README on instructions to contribute.
.. Do not remove the comments that describe each section. They are included to provide guidance to contributors.
.. Do not remove other content provided in the templates, such as a section. Instead, comment out the content and include comments to explain the situation. For example:
	- If a section within the template is not needed, comment out the section title and label reference. Do not delete the expected section title, reference or related comments provided from the template.
    - If a file cannot include a title (surrounded by ampersands (#)), comment out the title from the template and include a comment explaining why this is implemented (in addition to applying the ``title`` directive).

.. This is the label that can be used for cross referencing this file.
.. Recommended title label format is "Directory Name"-"Title Name"  -- Spaces should be replaced by hyphens.
.. _Data-Products-DP0-1-Data-Products:
.. Each section should include a label for cross referencing to a given area.
.. Recommended format for all labels is "Title Name"-"Section Name" -- Spaces should be replaced by hyphens.
.. To reference a label that isn't associated with an reST object such as a title or figure, you must include the link and explicit title using the syntax :ref:`link text <label-name>`.
.. A warning will alert you of identical labels during the linkcheck process.

###################
DP0.1 Data Products
###################

.. This section should provide a brief, top-level description of the page.

.. _DP0-1-Data-Products-Introduction:

The DESC DC2 Data Set
=====================

DP0 is based on the the simulated, LSST-like images generated by the Dark Energy Science Collaboration (DESC) for their Data Challenge 2 (DC2; arXiv:2010.05926). 
DP0 only uses the 300 square degrees of DC2 images that were simulated for five years of the LSST's wide-fast-deep component (WFD; also called the main survey) with a baseline cadence (i.e., a fiducial observing strategy).
For more information about the LSST regions and cadence see `Ivezic et al. (2019) <https://ui.adsabs.harvard.edu/abs/2019ApJ...873..111I/abstract>`_. 

**Simulated Objects and Images:**
The DC2's WFD simulated images include galaxies (with large-scale structure), Type Ia supernovae, and stars (10% of which are variable).
DP0.1 does not include AGN, strong lenses, solar system objects, non-Ia extragalactic transients, or diffuse features (e.g., tidal streams, intracluster light).
The DESC simulated the DC2 images using the `imSim <https://github.com/LSSTDESC/imSim>`__ package.

**Image Processing:**
The DESC processed the simulated DC2 images with `Version 19 <https://pipelines.lsst.io/v/v19_0_0/index.html>`_ of the LSST Science Pipelines.
DP0.1 makes the DESC's DC2 images and catalogs available to RSP users.
For DP0.2, the Rubin Data Production team will reprocess the same images with the most up-to-date version of the LSST Science Pipelines, and release the resulting images and catalogs in mid-2022.

.. toctree::
    :maxdepth: 2
    :glob:

    index-data-processing


.. _DP0-1-Data-Products-DPDD:

DP0.1 Data Products Definition Document (DPDD)
==============================================

Future data previews and Operations-era data releases will produce images and catalogs that more closely resemble the plan laid out in the Data Products Definitions Document (DPDD; `ls.st/dpdd <https://ls.st/dpdd/>`_).


.. _DP0-1-Data-Products-DPDD-Images:

Images
------

For DP0.1 the DC2 data set has only two types of images: coadds and processed visit images.

**Processed Visit Images** (PVIs):
A fully-qualified LSST image from a single visit (in other words, a single pointing) that includes the science pixel array and a quality mask and a variance array, in addition to a PSF characterization and metadata (including calibration metadata) about the image.
PVIs are stored with the background already subtracted.
A single CCD of a PVI is called a ``calexp``. 

*(MLG: point reader to the tutorial which retrieves and displays a PVI/calexp.)*

**Coadd Images**: 
An image that is the combination of multiple input images, often referred to as just a ``coadd`` or ``deep coadd``.
The inputs are aligned to a common projection and pixel grid, corrected to the same photometric scale and zero-point, with bad pixels and artifacts rejected.
Coadds have had non-astrophysical background removed.
(Image PSFs may also be matched prior to co-addition.)

*(MLG: find out of these coadds were PSF-matched).*

Coadd images are divided into ``tracts`` (a spherical convex polygon) and tracts are diveded into ``patches`` (a quadrilateral sub-region, with a size in pixels chosen to fit easily into memory on desktop computers, about the same size as a ``calexp``).

.. figure:: /_static/dpdd_dc2_zoom.png
    :name: dpdd_dc2_zoom
    
    Figure 15 from `The LSST DESC DC2 Simulated Sky Survey <https://ui.adsabs.harvard.edu/abs/2021ApJS..253...31L/abstract>`_, showing the simulated WFD region divided into tracts. The center image one tract quadrant, and the right image one hundredth the area of the tract quadrant. Patches are larger than the right image, as described in the DESC's paper: *"each tract is composed of 7x7 patches, and each patch is 4100 Ã— 4100 pixels with a pixel scale of 0.2 arcsec"*. 

The first :ref:`Examples-DP0-1-Notebooks` demonstrates how to identify the tract and patch for a given coordinate, and retrieve and plot a coadd image.


.. _DP0-1-Data-Products-DPDD-Catalogs:

Catalogs
--------

| *MLG Notes:*
| - *Overview of the three catalogs from the data processing, position, ref, and forced source.*
| - *Link to full schema and a curated list of useful columns for each catalog, DPDD-style.*
| - *Overview of the two catalogs also from the DESC DC2 Data Release: Object and Truth-Match.*
| - *Link to full schema for each catalog, DPDD-style, like in the release note (or just point to release note's appendices).*




.. _DP0-1-Data-Products-Visualization:
.. 
.. Visualization
.. =============
..
.. *MLG Note: not sure that this is needed?* 
.. This section includes information about data visualization.
..
..
.. _DP0-1-Data-Products-User-Generated:
.. 
.. User Generated Data Products and Processing
.. ===========================================
.. 
.. *MLG Note: not sure that this is needed?* 
.. This section includes information on user generated data products and user generated data processing.
